<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <script src="/lib/lightstreamer/5.0/commons/lscommons.js" type="text/javascript"></script>
  <script src="/lib/lightstreamer/5.0/commons/lspushpage.js" type="text/javascript"></script>
  <script src="/lib/lightstreamer/5.0/commons/custom/misc.js" type="text/javascript"></script>  
</head>

<body>

<script type="text/javascript">

  var pushPage = initializeDemoPushPage("/lib/lightstreamer/5.0/commons/custom/", false, null, null);
  initializeDemoEngine(pushPage, "/lib/lightstreamer/5.0/commons/", null);

  var group = ["BoatLocation101","BoatLocation102","BoatLocation103","BoatLocation104","BoatLocation105"
				,"BoatLocation106","BoatLocation107","BoatLocation108","BoatLocation109"];
  var schema = ["SourceId", "BoatName", "StoweName", "Latitude", "Longitude", "Heading", "BoatSpeed"];

  var table = new NonVisualTable(group, schema, "MERGE");
  table.setDataAdapter("TEST");
  table.setSnapshotRequired(true);
	
  table.onItemUpdate = function (item, itemUpdate, itemName) {
		var sourceId = itemUpdate.getNewValue(1);
		var boatName = itemUpdate.getNewValue(2);
		var stoweName = itemUpdate.getNewValue(3);
		var latitude = itemUpdate.getNewValue(4);
		var longitude = itemUpdate.getNewValue(5);
		var heading = itemUpdate.getNewValue(6);
		var boatSpeed = itemUpdate.getNewValue(7);
		if (itemUpdate.isValueChanged(4) || itemUpdate.isValueChanged(5) || itemUpdate.isValueChanged(6)) {
				updateBoat(sourceId, boatName, stoweName, latitude, longitude, heading, boatSpeed);
		}	
	};
  
	pushPage.addTable(table, "1");

function updateBoat(sourceId, boatName, stoweName, latitude, longitude, heading, boatSpeed) {
	console.log(stoweName + " (lat:" + latitude + " long:" + longitude + " heading:" + heading +")");
}





</script>



</body>

</html>
