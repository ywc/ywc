(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.element=e;this.unkudo=t(this.unkudo,this);this.complete=t(this.complete,this);this.end=t(this.end,this);this.start=t(this.start,this);this.bindEvents();this.counter=$(".count .num",this.element);this.element.data("kudoable",this)}e.prototype.bindEvents=function(){this.element.mouseenter(this.start);this.element.mouseleave(this.end);this.element.click(this.unkudo);$(this.element).on("touchstart",this.element,this.start);return $(this.element).on("touchend",this.element,this.end)};e.prototype.isKudoable=function(){return this.element.hasClass("kudoable")};e.prototype.isKudod=function(){return this.element.hasClass("complete")};e.prototype.start=function(){if(this.isKudoable()&&!this.isKudod()){this.element.trigger("kudo:active");this.element.addClass("active");return this.timer=setTimeout(this.complete,700)}};e.prototype.end=function(){if(this.isKudoable()&&!this.isKudod()){this.element.trigger("kudo:inactive");this.element.removeClass("active");if(this.timer!=null){return clearTimeout(this.timer)}}};e.prototype.complete=function(){this.end();this.incrementCount();this.element.addClass("complete");return this.element.trigger("kudo:added")};e.prototype.unkudo=function(e){e.preventDefault();if(this.isKudod()){this.decrementCount();this.element.removeClass("complete");return this.element.trigger("kudo:removed")}};e.prototype.setCount=function(e){return this.counter.html(e)};e.prototype.currentCount=function(){return parseInt(this.counter.html())};e.prototype.incrementCount=function(){return this.setCount(this.currentCount()+1)};e.prototype.decrementCount=function(){return this.setCount(this.currentCount()-1)};return e}();jQuery(function(t){return t.fn.kudoable=function(){return this.each(function(){return new e(t(this))})}})}).call(this)